
**[Reverse Nodes in K-Group](https://leetcode.com/problems/reverse-nodes-in-k-group/)**

Given theÂ `head`Â of a linked list, reverse the nodes of the listÂ `k`Â at a time, and returnÂ _the modified list_.

`k`Â is a positive integer and is less than or equal to the length of the linked list. If the number of nodes is not a multiple ofÂ `k`Â then left-out nodes, in the end, should remain as it is.

You may not alter the values in the list's nodes, only nodes themselves may be changed.

**Example 1:**

![](https://assets.leetcode.com/uploads/2020/10/03/reverse_ex1.jpg)

```
Input: head = [1,2,3,4,5], k = 2
Output: [2,1,4,3,5]
```

**Example 2:**

![](https://assets.leetcode.com/uploads/2020/10/03/reverse_ex2.jpg)

```
Input: head = [1,2,3,4,5], k = 3
Output: [3,2,1,4,5]
```

**Constraints:**

- The number of nodes in the list isÂ `n`.
- `1 <= k <= n <= 5000`
- `0 <= Node.val <= 1000`

**Follow-up:**Â Can you solve the problem inÂ `O(1)`Â extra memory space?

***
### Optimized Approach

### Complexity

- Time complexity: O(2n) ~ O(n)
    
- Space complexity: O(1)
    

####  **Algorithm:**

**Step 1:**Â Initialize a pointerÂ **`temp`**Â to the head of the linked list. UsingÂ **`temp`**, traverse to theÂ **Kth Node**Â iteratively.

**Step 2:**Â On reaching theÂ **Kth Node,**Â preserve theÂ **Kth Nodeâ€™s next**Â node asÂ **`nextNode`**Â and set theÂ **Kth Nodeâ€™s next**Â pointer toÂ **`null`**. This effectivelyÂ **breaks**Â the linked list in aÂ **smaller**Â **list**Â of sizeÂ **K**Â that can beÂ **reversed**Â andÂ **attached**Â **back**.

![image.png](https://assets.leetcode.com/users/images/31705453-d59e-4e43-910a-46087a4be998_1709924284.5475707.png)

**Step 3:**Â Treat thisÂ **segment**Â fromÂ **`temp`**Â toÂ **Kth Node**Â as an individual linked list andÂ **reverse it.**Â This can be done via theÂ **help**Â of a helper functionÂ **`reverseLinkedList`**Â which has been discussed in detail in this solutionÂ [**Reverse Linked List**.](https://leetcode.com/problems/reverse-linked-list/solutions/3364713/3-approach-easy-c-solution-brute-force-better-and-optimized-approach)

**Step 4:**Â The reversed linked list segment returns a modified list withÂ **`temp`**Â now at itsÂ **tail**Â Â and theÂ **`KthNode`**Â pointing to its head. Update theÂ **`temp`sÂ `next`**Â pointer toÂ **`nextNode`**.

If we are at theÂ **first**Â **segment**Â of K nodes,Â **update**Â theÂ **head**Â toÂ **`Kth Node`**.

![image.png](https://assets.leetcode.com/users/images/e33af51f-7ee6-4cbb-bab2-d1e30a830a6c_1709924350.670217.png)

**Step 5: Continue**Â this reversal forÂ **further groups.**Â If a segment has fewer thanÂ **K Nodes**, leave them unmodified and return theÂ **new head**. Use theÂ **prevLast**Â **pointer**Â to maintain theÂ **link**Â between the end of theÂ **previous**Â **reversed**Â **segment**Â and theÂ **current**Â **segment**.

![image.png](https://assets.leetcode.com/users/images/d1376bc5-9418-4b7f-8979-dd619ab2a01e_1709924357.8959017.png)

---

![WhatsApp Image 2024-03-09 at 00.32.26_1b6ddc3b.jpg](https://assets.leetcode.com/users/images/8f757d67-4ec7-4eee-933e-6ab93956d60a_1709924601.5630517.jpeg)

![WhatsApp Image 2024-03-09 at 00.32.25_6950486e.jpg](https://assets.leetcode.com/users/images/d43f6bef-fcf1-47cf-8c1e-45f3ebb7b259_1709924590.9423769.jpeg)

![WhatsApp Image 2024-03-09 at 00.32.25_2c290100.jpg](https://assets.leetcode.com/users/images/53531780-e79c-4e9f-aaad-ec2a0f696edd_1709924611.2043374.jpeg)

### Code

```cpp
/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */

// Optimized Approach
// Time complexity -> O(2n) ~ O(n) and Space -> O(1)
class Solution {
private:
    // Helper function to reverse a linked list
    ListNode* reverseLinkedList(ListNode *head) 
    {
        ListNode *currNode = head, *prevNode = nullptr, *nextNode;
        while (currNode != nullptr) 
        {
            nextNode = currNode->next;
            currNode->next = prevNode;
            prevNode = currNode;
            currNode = nextNode;
        }
        return prevNode;
    }

    // Helper function to get the kth node from the current position
    ListNode* getKthNode(ListNode *temp, int k) 
    {
        k -= 1;
        while (temp != nullptr && k > 0) 
        {
            k--;
            temp = temp->next;
        }
        return temp;
    }

public:
    // Function to reverse nodes in k-group in a linked list
    ListNode* reverseKGroup(ListNode* head, int k) 
    {
        ListNode *temp = head, *prevNode = nullptr, *nextNode = nullptr;
        // Iterate through the linked list
        while (temp != nullptr) 
        { 
            // Get the kth node from the current position
            ListNode *kthNode = getKthNode(temp, k);

            // If kth node is not found, connect the remaining nodes to the previous group
            if (kthNode == nullptr) 
            {
                if (prevNode != nullptr) 
                {
                    prevNode->next = temp;
                }
                break;
            }

            // Save the next node after kth node
            nextNode = kthNode->next;

            // Disconnect the kth node from the rest of the list
            kthNode->next = nullptr;

            // Reverse the current k-group and update head if necessary
            reverseLinkedList(temp);
            if (temp == head) 
            {
                head = kthNode;
            } else 
            {
                prevNode->next = kthNode;
            }

            // Update pointers for the next iteration
            prevNode = temp;
            temp = nextNode;
        }
        return head;
    }
};
```

***
**Important Link**
1. **[Solution Link](https://leetcode.com/problems/reverse-nodes-in-k-group/solutions/4844525/best-c-solution-optimized-approach-with-explanation-striver-solution)**
2. **[Video Link](https://youtu.be/lIar1skcQYI)**
3. **[For Detailed Solution](https://takeuforward.org/data-structure/reverse-linked-list-in-groups-of-size-k/)**

**Special Thanks to Striver ðŸ’™**